<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GPA & CGPA Calculator | Anna University </title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>



/* ================== ROOT VARIABLES ================== */

:root{
  --bg-main:#F8F9FA;

  --primary:#4F6EF7;
  --primary-soft:#EEF2FF;

  --text-main:#111827;
  --text-muted:#6B7280;

  --border-light:rgba(0,0,0,0.08);

  --success:#22C55E;

  --radius-lg:18px;
  --radius-md:14px;
  --radius-sm:10px;
}


/* ================== RESET ================== */

*{
  Margin:0;
  Padding:0;
  Box-sizing:border-box;
  Font-family:”Inter”,”SF Pro Display”,system-ui,sans-serif;
}


/* ================== BODY ================== */

Body{
  Min-height:100vh;

  Display:flex;
  Justify-content:center;

  Background:var(--bg-main);

  Color:var(--text-main);

  Line-height:1.6;
}


/* ================== MAIN CONTAINER ================== */

.card{
  Width:100%;
  Max-width:980px;

  Margin:40px 16px;

  Background:#ffffff;

  Border-radius:var(--radius-lg);

  Padding:48px;

  Padding-bottom:120px; /* Footer protection */

  Border:1px solid var(--border-light);

  Box-shadow:
    0 10px 24px rgba(0,0,0,0.05),
    0 2px 6px rgba(0,0,0,0.04);
}


/* ===== CREDIT WEIGHT COLORS ===== */

/* 4+ credits (Heavy) */
.weight-heavy {
  border-left: 6px solid #E5484D;
  background: linear-gradient(to right, rgba(229,72,77,0.08), #ffffff);
}

/* 3 credits (Medium) */
.weight-medium {
  border-left: 6px solid #F59E0B;
  background: linear-gradient(to right, rgba(245,158,11,0.08), #ffffff);
}

/* 2 credits (Light) */
.weight-light {
  border-left: 6px solid #FACC15;
  background: linear-gradient(to right, rgba(250,204,21,0.08), #ffffff);
}

/* 1 credit (Mini) */
.weight-mini {
  border-left: 6px solid #22C55E;
  background: linear-gradient(to right, rgba(34,197,94,0.08), #ffffff);
}


/* ================== HEADER ================== */

.header-flex{
  Display:flex;
  Align-items:center;
  Gap:18px;

  Margin-bottom:36px;
}

.college-logo{
  Width:56px;
}

.title-block h1{
  Font-size:clamp(1.3rem,2vw,1.6rem);
  Font-weight:700;
  Color:#0F172A;
}

.title-block p{
  Font-size:clamp(0.75rem,1vw,0.85rem);
  Color:var(--text-muted);
}


/* ================== GLASS STICKY HEADER ================== */

#semTitle{
  Position:sticky;
  Top:0;
  z-index:50;

  padding:18px 0;

  background:rgba(248,249,250,0.85);
  backdrop-filter:blur(14px);

  border-bottom:1px solid var(--border-light);

  font-size:clamp(1.2rem,2vw,1.5rem);
  font-weight:600;

  color:#1E293B;

  letter-spacing:0.2px;
}


/* Pill badge */
#semTitle::before{
  Content:”CURRENT”;
  Display:inline-block;

  Margin-bottom:6px;
  Padding:3px 10px;

  Background:var(--primary-soft);
  Color:var(--primary);

  Border-radius:999px;

  Font-size:11px;
  Font-weight:600;

  Margin-right:8px;
}


/* ================== FORM ================== */

Label{
  Display:block;

  Margin-top:22px;

  Font-size:13px;
  Font-weight:500;

  Color:#374151;
}

Input,select{
  Width:100%;

  Margin-top:6px;

  Padding:14px 16px;

  Background:#FBFCFD;

  Border:1px solid var(--border-light);

  Border-radius:var(--radius-sm);

  Font-size:14px;
  Color:#111827;

  Transition:all 0.25s ease;
}

Input:focus,
Select:focus{
  Outline:none;

  Border-color:var(--primary);

  Background:#ffffff;

  Box-shadow:0 0 0 4px rgba(79,110,247,0.15);
}


/* ================== SUBJECT GRID ================== */

#subjects,
.grid{
  Display:grid;

  Grid-template-columns:repeat(auto-fit,minmax(260px,1fr));

  Gap:28px;

  Margin-top:24px;
}


/* ================== SUBJECT CARD ================== */

.subject{
  Background:#ffffff;

  Border:1px solid var(--border-light);

  Border-radius:var(--radius-md);

  Padding:20px;

  Box-shadow:0 4px 6px rgba(0,0,0,0.05);

  Transition:all 0.3s ease;

  Opacity:0;
  Transform:translateY(16px);

  Animation:fadeUp 0.6s ease forwards;
}


/* Fade-in on scroll (auto) */
@keyframes fadeUp{
  To{
    Opacity:1;
    Transform:translateY(0);
  }
}


/* Hover / Lift */
.subject:hover{
  Transform:scale(1.02);

  Border-color:var(--primary);

  Box-shadow:0 12px 28px rgba(79,110,247,0.18);
}


/* Selected Grade */
.subject.active{
  Border-color:var(--success);

  Box-shadow:0 0 0 3px rgba(34,197,94,0.15);
}


/* Heavy credit highlight */
.subject.heavy{
  Border-left:4px solid #F59E0B;
}


/* ================== BUTTON ================== */

Button{
  Display:block;

  Width:100%;
  Max-width:360px;

  Margin:28px auto 0;

  Padding:14px 20px;

  Border-radius:var(--radius-md);

  Border:1px solid rgba(79,110,247,0.25);

  Background:linear-gradient(
    180deg,
    #F2F5FF,
    #E6EBFF
  );

  Color:#1E3A8A;

  Font-size:14px;
  Font-weight:600;

  Cursor:pointer;

  Transition:all 0.25s ease;

  Box-shadow:0 4px 10px rgba(79,110,247,0.18);
}


/* Hover */
Button:hover{
  Background:linear-gradient(
    180deg,
    #E6EBFF,
    #D9E0FF
  );

  Transform:translateY(-1px);

  Box-shadow:0 8px 18px rgba(79,110,247,0.28);
}


/* Secondary */
Button.secondary{
  Background:#F3F4F6;

  Color:#374151;

  Border:1px solid var(--border-light);

  Box-shadow:none;
}

Button.secondary:hover{
  Background:#E5E7EB;
}


/* ================== RESULT   ================== */

.result{
  Margin-top:30px;

  Background:#F9FAFB;

  Border:1px solid var(--border-light);

  Border-radius:var(--radius-md);

  Padding:20px;

  Text-align:center;

  Font-size:clamp(1.1rem,2vw,1.3rem);
  Font-weight:600;

  Color:var(--primary);
}


/* ================== FOOTER (UNCHANGED) ================== */

Footer{
  Text-align:center;
  Font-size:13px;
  Color:#444;
  Margin-top:30px;
}

Footer i{
  Font-size:22px;
  Margin:0 8px;
}

.fa-whatsapp{color:#25D366}
.fa-linkedin{color:#0A66C2}
.fa-phone{color:#2E7D32}
.fa-envelope{color:#D93025}

.fa-instagram{
  Background:radial-gradient(circle at 30% 30%,#feda75,#fa7e1e,#d62976,#962fbf,#4f5bd5);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}


/* ================== MOBILE ================== */

@media(max-width:700px){

  .card{
    Padding:28px 20px;
  }

  .header-flex{

    Flex-direction:column;

    Text-align:center;

  }


  #subjects,
  .grid{
    Grid-template-columns:1fr;
    Gap:22px;
  }

  Button{
    Max-width:100%;
  }

}

</style>


</head>

<body>
<div class="card">

<!-- ===== WELCOME PAGE ===== -->
<section id="page-welcome" class="page">
  <div class="header">
    <div class="header-flex">
      <img src="college-logo.png" alt="College Logo" class="college-logo">
      <div class="title-block">
        <h1>GPA & CGPA Calculator</h1>
        <p>Computer Science and Engineering<br>Anna University</p>
      </div>
    </div>
  </div>

  <label>Student Name</label>
  <input id="studentName" placeholder="Enter your name">

  <label>Email Address</label>
  <input id="studentEmail" type="email" placeholder="Enter your email">

  <label>Regulation</label>
  <select id="regulation" onchange="updateSemesterOptions()">
    <option value="">Select Regulation</option>
    <option value="2021">R2021</option>
    <option value="2025">R2025</option>
  </select>
  <label>Number of Semesters Completed</label>
  <select id="semCompleted">
    <option value="">Select Semester</option>
  </select>

  <button onclick="startGPA()">Continue</button>
</section>

<section id="page-gpa" class="page">
  <div class="header center-text">
    <h1 id="semTitle"></h1>
    <p id="userText"></p>
  </div>

  <div id="subjects"></div>

  <button onclick="calculateGPA()">Calculate GPA</button>
  <div id="result" class="result"></div>

  <button id="cgpaBtn" style="display:none" onclick="showCGPAPage()">Calculate CGPA</button>
  <button class="secondary" onclick="showPage('page-welcome')">Back to Menu</button>
</section>

<section id="page-cgpa" class="page">
  <div class="header center-text">
    <h1>CGPA Calculator</h1>
  </div>

  <div id="cgpaInputs"></div>

  <button onclick="calculateCGPA()">Calculate CGPA</button>
  <div id="cgpaResult" class="result"></div>

  <button class="secondary" onclick="resetCGPA()">Back to Menu</button>
</section>

<footer>
 Developed by <b>Zia Anas</b><br><br>
  <a href="https://wa.me/919363645734"><i class="fab fa-whatsapp"></i></a>
  <a href="https://www.instagram.com/m_zia_anas"><i class="fab fa-instagram"></i></a>
  <a href="https://www.linkedin.com/in/zia-anes-m"><i class="fab fa-linkedin"></i></a>
  <a href="mailto:ziaanesm@gmail.com"><i class="fas fa-envelope"></i></a>
  <a href="tel:+919363645734"><i class="fas fa-phone"></i></a>
</footer>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { 
  getFirestore,
  addDoc,
  collection,
  serverTimestamp
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAg9g2kxoZQa81huye_KsBhdgyammefnAo",
  authDomain: "gpa-cgpa-calc.firebaseapp.com",
  projectId: "gpa-cgpa-calc",
  storageBucket: "gpa-cgpa-calc.firebasestorage.app",
  messagingSenderId: "152997298833",
  appId: "1:152997298833:web:dc63339be1f6614e5cb530",
  measurementId: "G-6XD6K25QFJ"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
window.saveToFirebase = async function(data) {
  try {
    await addDoc(collection(db, "results"), {
      ...data,
      createdAt: serverTimestamp()
    });
    console.log("Saved to Firebase");
  } catch (e) {
    console.error("Firebase Error:", e);
  }
};
</script>

<script>
/* ================= GOOGLE FORM TRACKING ================= */

const GOOGLE_FORM_URL =
  "https://docs.google.com/forms/d/e/1FAIpQLSfSfbRG6U9CmcflXPz8J_DtYoXxCHcIe1LfrvdH2zfQ9b7qyg/formResponse";

const NAME_ENTRY = "entry.2023813567";
const EMAIL_ENTRY = "entry.1559328429";

function trackUser(name, email) {
  const data = new URLSearchParams();
  data.append(NAME_ENTRY, name);
  data.append(EMAIL_ENTRY, email);

  fetch(GOOGLE_FORM_URL, {
    method: "POST",
    mode: "no-cors",
    body: data
  });
}

/* ================= ORIGINAL LOGIC ================= */

function showPage(id){
  document.querySelectorAll(".page").forEach(p=>p.style.display="none");
  document.getElementById(id).style.display="block";
}

let appState={
  name:"",
  semester:0,
  regulation:"",
  gpas:{}
};

const gradePoints={O:10,"A+":9,A:8,"B+":7,B:6,C:5,RA:0};
const semesterCredits2021={1:22,2:26,3:23,4:22,5:20};
const semesterCredits2025={1:23};

const curriculum2021={
1:[
{code:"HS3152",name:"Professional English I",credits:3},
{code:"MA3151",name:"Matrices and Calculus",credits:4},
{code:"PH3151",name:"Engineering Physics",credits:3},
{code:"CY3151",name:"Engineering Chemistry",credits:3},
{code:"GE3151",name:"Problem Solving and Python Programming",credits:3},
{code:"GE3152",name:"Heritage of Tamils",credits:1},
{code:"GE3171",name:"Problem Solving and Python Programming Laboratory",credits:2},
{code:"BS3171",name:"Physics and Chemistry Laboratory",credits:2},
{code:"GE3172",name:"English Laboratory",credits:1}
],
2:[
{code:"HS3252",name:"Professional English II",credits:2},
{code:"MA3251",name:"Statistics and Numerical Methods",credits:4},
{code:"PH3256",name:"Physics for Information Science",credits:3},
{code:"BE3251",name:"Basic Electrical and Electronics Engineering",credits:3},
{code:"GE3251",name:"Engineering Graphics",credits:4},
{code:"CS3251",name:"Programming in C",credits:3},
{code:"GE3252",name:"Tamils and Technology",credits:1},
{code:"GE3271",name:"Engineering Practices Laboratory",credits:2},
{code:"CS3271",name:"Programming in C Laboratory",credits:2},
{code:"GE3272",name:"Communication Laboratory",credits:2}
],
3:[
{code:"MA3354",name:"Discrete Mathematics",credits:4},
{code:"CS3351",name:"Digital Principles and Computer Organization",credits:4},
{code:"CS3352",name:"Foundations of Data Science",credits:3},
{code:"CS3301",name:"Data Structures",credits:3},
{code:"CS3391",name:"Object Oriented Programming",credits:3},
{code:"CS3311",name:"Data Structures Laboratory",credits:1.5},
{code:"CS3381",name:"Object Oriented Programming Laboratory",credits:1.5},
{code:"CS3361",name:"Data Science Laboratory",credits:2},
{code:"GE3361",name:"Professional Development",credits:1}
],
4:[
{code:"CS3452",name:"Theory of Computation",credits:3},
{code:"CS3491",name:"Artificial Intelligence and Machine Learning",credits:4},
{code:"CS3492",name:"Database Management Systems",credits:3},
{code:"CS3401",name:"Algorithms",credits:4},
{code:"CS3451",name:"Introduction to Operating Systems",credits:3},
{code:"GE3451",name:"Environmental Sciences and Sustainability",credits:2},
{code:"CS3461",name:"Operating Systems Laboratory",credits:1.5},
{code:"CS3481",name:"Database Management Systems Laboratory",credits:1.5}
],
5:[
{code:"CS3591", name:"Computer Networks", credits:4},
{code:"CS3501", name:"Compiler Design", credits:4},
{code:"CB3491", name:"Cryptography and Cyber Security", credits:3},
{code:"CS3551", name:"Distributed Computing", credits:3},
{code:"CCS366", name:"Software Testing and Automation", credits:3},
{code:"CCS375", name:"Web Technologies", credits:3}
]
};

const curriculum2025={
1:[
{code:"MA25C01", name:"Applied Calculus", credits:4},
{code:"EN25C01", name:"English Essentials - 1", credits:2},
{code:"UC25H01", name:"Heritage of Tamils", credits:1},
{code:"PH25C01", name:"Applied Physics - 1", credits:3},
{code:"CY25C01", name:"Applied Chemistry - 1", credits:3},
{code:"CS25C01", name:"Computer Programming: C", credits:3},
{code:"CS25C03", name:"Essentials of Computing", credits:3},
{code:"ME25C04", name:"Makerspace", credits:2},
{code:"UC25A01", name:"Life Skills for Engineers - 1", credits:1},
{code:"UC25A02", name:"Physical Education - 1", credits:1}
]
};

function updateSemesterOptions(){

  const reg = document.getElementById("regulation").value;
  const semBox = document.getElementById("semCompleted");

  semBox.innerHTML = '<option value="">Select Semester</option>';

  if(reg==="2021"){
    for(let i=1;i<=5;i++){
      semBox.innerHTML += `<option>${i}</option>`;
    }
  }

  if(reg==="2025"){
    semBox.innerHTML += `<option>1</option>`;
  }
}

function startGPA(){

  const n=document.getElementById("studentName").value.trim();
  const e=document.getElementById("studentEmail").value.trim();
  const r=document.getElementById("regulation").value;
  const s=document.getElementById("semCompleted").value;

  if(!n||!e||!r||!s){
    alert("Please fill all fields");
    return;
  }

  trackUser(n,e);

  appState.name=n;
  appState.regulation=r;
  appState.semester=parseInt(s);

  loadSemester();
}

function loadSemester(){
  
document.querySelector(".title-block p").innerText =
"Computer Science and Engineering\nAnna University – Regulation " + appState.regulation;

document.getElementById("semTitle").innerText=`Semester ${appState.semester} GPA`;
  document.getElementById("userText").innerText=`Hello ${appState.name}`;
  document.getElementById("result").innerHTML="";
  const box=document.getElementById("subjects");
  box.innerHTML="";
  let data;

  if(appState.regulation==="2021"){
    data = curriculum2021;
  }

  if(appState.regulation==="2025"){
    data = curriculum2025;
  }

  data[appState.semester].forEach(sub=>{
    let weightClass = "";

    if (sub.credits >= 4) {
      weightClass = "weight-heavy";
    } else if (sub.credits == 3) {
      weightClass = "weight-medium";
    } else if (sub.credits == 2) {
      weightClass = "weight-light";
    } else {
      weightClass = "weight-mini";
    }

    box.innerHTML+=`
      <div class="subject ${weightClass}">
        <label>${sub.code} – ${sub.name} (Credits: ${sub.credits})</label>
        <select id="${sub.code}">
          <option value="">Select Grade</option>
          <option>O</option><option>A+</option><option>A</option>
          <option>B+</option><option>B</option><option>C</option><option>RA</option>
        </select>
      </div>`;
  });
  document.getElementById("cgpaBtn").style.display=appState.semester>=2?"block":"none";
  showPage("page-gpa");
}

function calculateGPA(){

  let tc = 0;
  let tp = 0;
  let data;

  // Select correct curriculum
  if(appState.regulation === "2021"){
    data = curriculum2021;
  }

  if(appState.regulation === "2025"){
    data = curriculum2025;
  }

  for(const s of data[appState.semester]){

    const g = document.getElementById(s.code).value;

    if(!g){
      alert("Please select all grades");
      return;
    }

    tc += s.credits;
    tp += gradePoints[g] * s.credits;
  }

  const gpa = (tp / tc).toFixed(2);
  window.saveToFirebase({
    name: appState.name,
    email: document.getElementById("studentEmail").value,
    semester: appState.semester,
    regulation: appState.regulation,
    gpa: Number(gpa),
    type: "GPA"
  });
  appState.gpas[appState.semester] = parseFloat(gpa);

  document.getElementById("result").innerText = `GPA : ${gpa}`;
}

function showCGPAPage(){
  document.getElementById("cgpaResult").innerText = "";
  let html="";
  for(let i=1;i<=appState.semester;i++){
    html+=`
      <label>Semester ${i} GPA</label>
      <input type="number" step="0.01" id="gpa${i}" value="${appState.gpas[i]??""}">
    `;
  }
  document.getElementById("cgpaInputs").innerHTML=html;
  showPage("page-cgpa");
}

function calculateCGPA(){

  let total = 0;
  let credits = 0;
  let creditMap;

  // Select correct credit map
  if(appState.regulation === "2021"){
    creditMap = semesterCredits2021;
  }

  if(appState.regulation === "2025"){
    creditMap = semesterCredits2025;
  }

  for(let i = 1; i <= appState.semester; i++){

    const g = parseFloat(
      document.getElementById(`gpa${i}`).value
    );

    if(isNaN(g)){
      alert("Please enter all GPAs");
      return;
    }

    total += g * creditMap[i];
    credits += creditMap[i];
  }

  const cgpa = (total / credits).toFixed(2);
  window.saveToFirebase({
    name: appState.name,
    email: document.getElementById("studentEmail").value,
    semester: appState.semester,
    regulation: appState.regulation,
    cgpa: Number(cgpa),
    type: "CGPA"
  });
  document.getElementById("cgpaResult").innerText =
  "CGPA:"+cgpa
}

function resetCGPA(){
  document.getElementById("cgpaResult").innerText = "";
  showPage("page-welcome");
}

showPage("page-welcome");
</script>

</body>
</html>



