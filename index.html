<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>GPA & CGPA Calculator â€“ AU R2021 (CSE)</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #ffffff;
  margin: 0;
  padding: 0;
  color: #222;
}
.container {
  max-width: 900px;
  margin: auto;
  padding: 20px;
}
h1, h2 {
  text-align: center;
}
.card {
  border: 1px solid #ddd;
  padding: 20px;
  border-radius: 8px;
  margin-top: 20px;
}
label {
  display: block;
  margin-top: 12px;
  font-weight: bold;
}
input, select, button {
  width: 100%;
  padding: 10px;
  margin-top: 6px;
}
button {
  background: #2563eb;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
button:hover {
  background: #1e40af;
}
.hidden {
  display: none;
}
.footer {
  text-align: center;
  margin-top: 40px;
  font-size: 14px;
}
.footer a {
  margin: 0 8px;
  text-decoration: none;
}
</style>
</head>

<body>
<div class="container">

<!-- WELCOME -->
<div id="page-welcome" class="card">
  <h1>GPA & CGPA Calculator</h1>
  <p style="text-align:center">
    Computer Science & Engineering<br/>
    Anna University â€“ Regulation 2021
  </p>

  <label>Name</label>
  <input id="studentName" placeholder="Enter your name" />

  <label>Email</label>
  <input id="studentEmail" type="email" placeholder="Enter your email" />

  <label>Number of semesters completed</label>
  <select id="semesterCount">
    <option value="">Select</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
  </select>

  <button onclick="startApp()">Continue</button>
</div>

<!-- GPA PAGE -->
<div id="page-gpa" class="card hidden">
  <h2 id="gpa-title"></h2>
  <div id="subjects"></div>
  <button onclick="calculateGPA()">Calculate GPA</button>
  <h3 id="gpa-result"></h3>
  <button id="cgpaBtn" class="hidden" onclick="goToCGPA()">Calculate CGPA</button>
  <button onclick="backToMenu()">Back to Menu</button>
</div>

<!-- CGPA PAGE -->
<div id="page-cgpa" class="card hidden">
  <h2>CGPA Calculation</h2>
  <div id="cgpaInputs"></div>
  <button onclick="calculateCGPA()">Calculate CGPA</button>
  <h3 id="cgpa-result"></h3>
  <button onclick="backToMenu()">Back to Menu</button>
</div>

<div class="footer">
  This is created by <strong>Zia Anas</strong><br/><br/>
  <a href="https://wa.me/919363645734" target="_blank">WhatsApp</a>
  <a href="https://instagram.com/m_zia_anas" target="_blank">Instagram</a>
  <a href="https://linkedin.com/in/zia-anes-m" target="_blank">LinkedIn</a>
  <a href="tel:+919363645734">Call</a>
</div>

</div>

<script>
/* ================= CONFIG ================= */

// ðŸ”¥ Your real Google Form submit URL:
const GOOGLE_FORM_URL =
  "https://docs.google.com/forms/d/e/13G9VlVwCaFFxzv--nK_RYLLyAFctqsxvm4JjzZxCZuQ/formResponse";

const semesters = {
  1: {
    credits: 22,
    subjects: [
      ["HS3151 Professional English â€“ I", 2],
      ["MA3151 Matrices and Calculus", 4],
      ["PH3151 Engineering Physics", 3],
      ["CY3151 Engineering Chemistry", 3],
      ["GE3151 Problem Solving and Python Programming", 3],
      ["GE3152 Engineering Graphics", 4],
      ["GE3171 Problem Solving and Python Programming Laboratory", 2],
      ["BS3171 Physics and Chemistry Laboratory", 1]
    ]
  },
  2: {
    credits: 26,
    subjects: [
      ["HS3252 Professional English â€“ II", 2],
      ["MA3251 Statistics and Numerical Methods", 4],
      ["PH3256 Physics for Information Science", 3],
      ["BE3251 Basic Electrical and Electronics Engineering", 3],
      ["GE3251 Engineering Graphics", 4],
      ["CS3251 Programming in C", 3],
      ["GE3271 Engineering Practices Laboratory", 2],
      ["CS3271 Programming in C Laboratory", 2],
      ["GE3272 Communication Laboratory / Foreign Language", 2],
      ["GE3252 Tamil / Heritage of Tamils", 1]
    ]
  },
  3: {
    credits: 23,
    subjects: [
      ["MA3354 Discrete Mathematics", 4],
      ["CS3351 Digital Principles and Computer Organization", 4],
      ["CS3352 Foundations of Data Science", 3],
      ["CS3301 Data Structures", 3],
      ["CS3391 Object Oriented Programming", 3],
      ["CS3311 Data Structures Laboratory", 1.5],
      ["CS3381 Object Oriented Programming Laboratory", 1.5],
      ["CS3361 Data Science Laboratory", 2],
      ["GE3361 Professional Development", 1]
    ]
  },
  4: {
    credits: 22,
    subjects: [
      ["CS3452 Theory of Computation", 3],
      ["CS3491 Artificial Intelligence and Machine Learning", 4],
      ["CS3492 Database Management Systems", 3],
      ["CS3401 Algorithms", 4],
      ["CS3451 Introduction to Operating Systems", 3],
      ["GE3451 Environmental Sciences and Sustainability", 2],
      ["CS3461 Operating Systems Laboratory", 1.5],
      ["CS3481 Database Management Systems Laboratory", 1.5]
    ]
  }
};

const gradeMap = { O:10, A+:9, A:8, B+:7, B:6, C:5, U:0 };

let appState = { name:"", email:"", completed:0, gpas:{} };

/* ================= FUNCTIONS ================= */

function sendUsage(name, email) {
  const data = new URLSearchParams();
  // ðŸ”¥ Your entry field IDs
  data.append("entry.782499053", name);
  data.append("entry.1195044287", email);

  fetch(GOOGLE_FORM_URL, {
    method: "POST",
    mode: "no-cors",
    body: data
  });
}

function startApp() {
  const name = studentName.value.trim();
  const email = studentEmail.value.trim();
  const count = semesterCount.value;

  if (!name || !email || !count) {
    alert("Fill all fields");
    return;
  }

  appState = { name, email, completed: +count, gpas:{} };
  sendUsage(name, email);
  loadSemester(1);
}

function loadSemester(sem) {
  resetPages();
  pageGPA.classList.remove("hidden");

  // ðŸ”´ Clear old GPA for this sem
  appState.gpas[sem] = undefined;

  gpaTitle.innerText = `Semester ${sem} GPA â€“ ${appState.name}`;
  subjects.innerHTML = "";
  gpaResult.innerText = "";
  cgpaBtn.classList.add("hidden");

  semesters[sem].subjects.forEach((s, i) => {
    subjects.innerHTML += `
      <label>${s[0]} (${s[1]} credits)</label>
      <select id="g${i}">
        <option value="">Select grade</option>
        <option>O</option><option>A+</option><option>A</option>
        <option>B+</option><option>B</option><option>C</option><option>U</option>
      </select>`;
  });

  pageGPA.dataset.sem = sem;
}

function calculateGPA() {
  const sem = pageGPA.dataset.sem;
  let total = 0, credits = 0;

  semesters[sem].subjects.forEach((s, i) => {
    const g = document.getElementById("g"+i).value;
    if (!g) return;
    total += gradeMap[g] * s[1];
    credits += s[1];
  });

  const gpa = (total / credits).toFixed(3);
  appState.gpas[sem] = gpa;
  gpaResult.innerText = `Semester ${sem} GPA: ${gpa}`;

  if (sem < appState.completed) {
    cgpaBtn.classList.remove("hidden");
    cgpaBtn.onclick = () => loadSemester(sem+1);
  } else {
    cgpaBtn.classList.remove("hidden");
  }
}

function goToCGPA() {
  resetPages();
  pageCGPA.classList.remove("hidden");
  cgpaInputs.innerHTML = "";

  Object.keys(appState.gpas).forEach(s => {
    cgpaInputs.innerHTML += `
      <p>Semester ${s} GPA: ${appState.gpas[s]}</p>`;
  });
}

function calculateCGPA() {
  let total = 0, credits = 0;
  Object.keys(appState.gpas).forEach(s => {
    total += appState.gpas[s] * semesters[s].credits;
    credits += semesters[s].credits;
  });
  cgpaResult.innerText =
    `CGPA: ${(total/credits).toFixed(3)}`;
}

function backToMenu() {
  resetPages();
  pageWelcome.classList.remove("hidden");
}

function resetPages() {
  pageWelcome.classList.add("hidden");
  pageGPA.classList.add("hidden");
  pageCGPA.classList.add("hidden");
}
</script>

</body>
</html>
