<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GPA & CGPA Calculator | Anna University </title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:"Segoe UI",Roboto,Arial,sans-serif;
  background:#f4f6fb;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}

.card{
  width:100%;
  max-width:750px;
  padding:30px;
}

/* ===== HEADER ===== */
.header{
  margin-bottom:30px;
}

.header-flex{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:14px;
}

.center-text{
  text-align:center;
}

.college-logo{
  width:52px;
  height:auto;
}

.title-block h1{
  margin:0;
  font-size:28px;
  color:#1d2671;
}

.title-block p{
  margin:4px 0 0;
  font-size:14px;
  color:#555;
}

/* Mobile adjustment */
@media(max-width:600px){
  .header-flex{
    flex-direction:column;
    text-align:center;
  }
  .college-logo{
    width:48px;
  }
}

/* ===== FORM ===== */
label{
  display:block;
  margin-top:16px;
  font-weight:600;
  color:#333;
}

input,select{
  width:100%;
  padding:11px;
  margin-top:6px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:14px;
}

button{
  width:100%;
  margin-top:22px;
  padding:13px;
  background:linear-gradient(135deg,#1d2671,#3f51b5);
  color:#fff;
  border:none;
  border-radius:10px;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
}

button.secondary{
  background:#e0e3f5;
  color:#1d2671;
}

.page{display:none}

/* ===== GPA PAGE ===== */
.subject{
  padding:10px;
  border-radius:8px;
  background:#f7f8ff;
  margin-top:12px;
}

.result{
  text-align:center;
  margin-top:20px;
  font-size:20px;
  font-weight:bold;
  color:#1d2671;
}

/* ===== FOOTER ===== */
footer{
  text-align:center;
  font-size:13px;
  color:#444;
  margin-top:30px;
}

footer i{
  font-size:22px;
  margin:0 8px;
}

.fa-whatsapp{color:#25D366}
.fa-linkedin{color:#0A66C2}
.fa-phone{color:#2E7D32}
.fa-envelope{color:#D93025}
.fa-instagram{
  background:radial-gradient(circle at 30% 30%,#feda75,#fa7e1e,#d62976,#962fbf,#4f5bd5);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
</style>
</head>

<body>
<div class="card">

<!-- ===== WELCOME PAGE ===== -->
<section id="page-welcome" class="page">
  <div class="header">
    <div class="header-flex">
      <img src="college-logo.png" alt="College Logo" class="college-logo">
      <div class="title-block">
        <h1>GPA & CGPA Calculator</h1>
        <p>Computer Science and Engineering<br>Anna University</p>
      </div>
    </div>
  </div>


  <label>Student Name</label>
  <input id="studentName" placeholder="Enter your name">

  <label>Email Address</label>
  <input id="studentEmail" type="email" placeholder="Enter your email">

  <label>Regulation</label>
  <select id="regulation" onchange="updateSemesterOptions()">
    <option value="">Select Regulation</option>
    <option value="2021">R2021</option>
    <option value="2025">R2025</option>
  </select>
  <label>Number of Semesters Completed</label>
  <select id="semCompleted">
    <option value="">Select Semester</option>
  </select>

  <button onclick="startGPA()">Continue</button>
</section>

<section id="page-gpa" class="page">
  <div class="header center-text">
    <h1 id="semTitle"></h1>
    <p id="userText"></p>
  </div>

  <div id="subjects"></div>

  <button onclick="calculateGPA()">Calculate GPA</button>
  <div id="result" class="result"></div>

  <button id="cgpaBtn" style="display:none" onclick="showCGPAPage()">Calculate CGPA</button>
  <button class="secondary" onclick="showPage('page-welcome')">Back to Menu</button>
</section>

<section id="page-cgpa" class="page">
  <div class="header center-text">
    <h1>CGPA Calculator</h1>
  </div>

  <div id="cgpaInputs"></div>

  <button onclick="calculateCGPA()">Calculate CGPA</button>
  <div id="cgpaResult" class="result"></div>

  <button class="secondary" onclick="resetCGPA()">Back to Menu</button>
</section>

<footer>
  This is created by <b>M Zia Anas</b><br><br>
  <a href="https://wa.me/919363645734"><i class="fab fa-whatsapp"></i></a>
  <a href="https://www.instagram.com/m_zia_anas"><i class="fab fa-instagram"></i></a>
  <a href="https://www.linkedin.com/in/zia-anes-m"><i class="fab fa-linkedin"></i></a>
  <a href="mailto:ziaanesm@gmail.com"><i class="fas fa-envelope"></i></a>
  <a href="tel:+919363645734"><i class="fas fa-phone"></i></a>
</footer>

</div>

<script>
/* ================= GOOGLE FORM TRACKING ================= */

const GOOGLE_FORM_URL =
  "https://docs.google.com/forms/d/e/1FAIpQLSfSfbRG6U9CmcflXPz8J_DtYoXxCHcIe1LfrvdH2zfQ9b7qyg/formResponse";

const NAME_ENTRY = "entry.2023813567";
const EMAIL_ENTRY = "entry.1559328429";

function trackUser(name, email) {
  const data = new URLSearchParams();
  data.append(NAME_ENTRY, name);
  data.append(EMAIL_ENTRY, email);

  fetch(GOOGLE_FORM_URL, {
    method: "POST",
    mode: "no-cors",
    body: data
  });
}

/* ================= ORIGINAL LOGIC ================= */

function showPage(id){
  document.querySelectorAll(".page").forEach(p=>p.style.display="none");
  document.getElementById(id).style.display="block";
}

let appState={
  name:"",
  semester:0,
  regulation:"",
  gpas:{}
};

const gradePoints={O:10,"A+":9,A:8,"B+":7,B:6,C:5,RA:0};
const semesterCredits2021={1:22,2:26,3:23,4:22,5:20};
const semesterCredits2025={1:23};

const curriculum2021={
1:[
{code:"HS3152",name:"Professional English I",credits:3},
{code:"MA3151",name:"Matrices and Calculus",credits:4},
{code:"PH3151",name:"Engineering Physics",credits:3},
{code:"CY3151",name:"Engineering Chemistry",credits:3},
{code:"GE3151",name:"Problem Solving and Python Programming",credits:3},
{code:"GE3152",name:"Heritage of Tamils",credits:1},
{code:"GE3171",name:"Problem Solving and Python Programming Laboratory",credits:2},
{code:"BS3171",name:"Physics and Chemistry Laboratory",credits:2},
{code:"GE3172",name:"English Laboratory",credits:1}
],
2:[
{code:"HS3252",name:"Professional English II",credits:2},
{code:"MA3251",name:"Statistics and Numerical Methods",credits:4},
{code:"PH3256",name:"Physics for Information Science",credits:3},
{code:"BE3251",name:"Basic Electrical and Electronics Engineering",credits:3},
{code:"GE3251",name:"Engineering Graphics",credits:4},
{code:"CS3251",name:"Programming in C",credits:3},
{code:"GE3252",name:"Tamils and Technology",credits:1},
{code:"GE3271",name:"Engineering Practices Laboratory",credits:2},
{code:"CS3271",name:"Programming in C Laboratory",credits:2},
{code:"GE3272",name:"Communication Laboratory",credits:2}
],
3:[
{code:"MA3354",name:"Discrete Mathematics",credits:4},
{code:"CS3351",name:"Digital Principles and Computer Organization",credits:4},
{code:"CS3352",name:"Foundations of Data Science",credits:3},
{code:"CS3301",name:"Data Structures",credits:3},
{code:"CS3391",name:"Object Oriented Programming",credits:3},
{code:"CS3311",name:"Data Structures Laboratory",credits:1.5},
{code:"CS3381",name:"Object Oriented Programming Laboratory",credits:1.5},
{code:"CS3361",name:"Data Science Laboratory",credits:2},
{code:"GE3361",name:"Professional Development",credits:1}
],
4:[
{code:"CS3452",name:"Theory of Computation",credits:3},
{code:"CS3491",name:"Artificial Intelligence and Machine Learning",credits:4},
{code:"CS3492",name:"Database Management Systems",credits:3},
{code:"CS3401",name:"Algorithms",credits:4},
{code:"CS3451",name:"Introduction to Operating Systems",credits:3},
{code:"GE3451",name:"Environmental Sciences and Sustainability",credits:2},
{code:"CS3461",name:"Operating Systems Laboratory",credits:1.5},
{code:"CS3481",name:"Database Management Systems Laboratory",credits:1.5}
],
5:[
{code:"CS3591", name:"Computer Networks", credits:4},
{code:"CS3501", name:"Compiler Design", credits:4},
{code:"CB3491", name:"Cryptography and Cyber Security", credits:3},
{code:"CS3551", name:"Distributed Computing", credits:3},
{code:"CCS366", name:"Software Testing and Automation", credits:3},
{code:"CCS375", name:"Web Technologies", credits:3}
]
};

const curriculum2025={
1:[
{code:"MA25C01", name:"Applied Calculus", credits:4},
{code:"EN25C01", name:"English Essentials - 1", credits:2},
{code:"UC25H01", name:"Heritage of Tamils", credits:1},
{code:"PH25C01", name:"Applied Physics - 1", credits:3},
{code:"CY25C01", name:"Applied Chemistry - 1", credits:3},
{code:"CS25C01", name:"Computer Programming: C", credits:3},
{code:"CS25C03", name:"Essentials of Computing", credits:3},
{code:"ME25C04", name:"Makerspace", credits:2},
{code:"UC25A01", name:"Life Skills for Engineers - 1", credits:1},
{code:"UC25A02", name:"Physical Education - 1", credits:1}
]
};


function updateSemesterOptions(){

  const reg = document.getElementById("regulation").value;
  const semBox = document.getElementById("semCompleted");

  semBox.innerHTML = '<option value="">Select Semester</option>';

  if(reg==="2021"){
    for(let i=1;i<=5;i++){
      semBox.innerHTML += `<option>${i}</option>`;
    }
  }

  if(reg==="2025"){
    semBox.innerHTML += `<option>1</option>`;
  }
}

function startGPA(){

  const n=document.getElementById("studentName").value.trim();
  const e=document.getElementById("studentEmail").value.trim();
  const r=document.getElementById("regulation").value;
  const s=document.getElementById("semCompleted").value;

  if(!n||!e||!r||!s){
    alert("Please fill all fields");
    return;
  }

  trackUser(n,e);

  appState.name=n;
  appState.regulation=r;
  appState.semester=parseInt(s);

  loadSemester();
}

function loadSemester(){
  
document.querySelector(".title-block p").innerText =
"Computer Science and Engineering\nAnna University – Regulation " + appState.regulation;

document.getElementById("semTitle").innerText=`Semester ${appState.semester} GPA`;
  document.getElementById("userText").innerText=`Hello ${appState.name}`;
  document.getElementById("result").innerHTML="";
  const box=document.getElementById("subjects");
  box.innerHTML="";
  let data;

  if(appState.regulation==="2021"){
    data = curriculum2021;
  }

  if(appState.regulation==="2025"){
    data = curriculum2025;
  }

  data[appState.semester].forEach(sub=>{
    box.innerHTML+=`
      <div class="subject">
        <label>${sub.code} – ${sub.name} (Credits: ${sub.credits})</label>
        <select id="${sub.code}">
          <option value="">Select Grade</option>
          <option>O</option><option>A+</option><option>A</option>
          <option>B+</option><option>B</option><option>C</option><option>RA</option>
        </select>
      </div>`;
  });
  document.getElementById("cgpaBtn").style.display=appState.semester>=2?"block":"none";
  showPage("page-gpa");
}

function calculateGPA(){

  let tc = 0;
  let tp = 0;
  let data;

  // Select correct curriculum
  if(appState.regulation === "2021"){
    data = curriculum2021;
  }

  if(appState.regulation === "2025"){
    data = curriculum2025;
  }

  for(const s of data[appState.semester]){

    const g = document.getElementById(s.code).value;

    if(!g){
      alert("Please select all grades");
      return;
    }

    tc += s.credits;
    tp += gradePoints[g] * s.credits;
  }

  const gpa = (tp / tc).toFixed(2);

  appState.gpas[appState.semester] = parseFloat(gpa);

  document.getElementById("result").innerText = `GPA : ${gpa}`;
}

function showCGPAPage(){
  let html="";
  for(let i=1;i<=appState.semester;i++){
    html+=`
      <label>Semester ${i} GPA</label>
      <input type="number" step="0.01" id="gpa${i}" value="${appState.gpas[i]??""}">
    `;
  }
  document.getElementById("cgpaInputs").innerHTML=html;
  showPage("page-cgpa");
}

function calculateCGPA(){

  let total = 0;
  let credits = 0;
  let creditMap;

  // Select correct credit map
  if(appState.regulation === "2021"){
    creditMap = semesterCredits2021;
  }

  if(appState.regulation === "2025"){
    creditMap = semesterCredits2025;
  }

  for(let i = 1; i <= appState.semester; i++){

    const g = parseFloat(
      document.getElementById(`gpa${i}`).value
    );

    if(isNaN(g)){
      alert("Please enter all GPAs");
      return;
    }

    total += g * creditMap[i];
    credits += creditMap[i];
  }

  document.getElementById("cgpaResult").innerText =
    `CGPA : ${(total/credits).toFixed(2)}`;
}

function resetCGPA(){
  document.getElementById("cgpaResult").innerText = "";
  showPage("page-welcome");
}

showPage("page-welcome");
</script>

</body>
</html>
